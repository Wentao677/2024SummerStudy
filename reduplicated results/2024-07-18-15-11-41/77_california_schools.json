[
    {
        "node_type": "keyword_extraction",
        "keywords": [
            "Los Angeles",
            "Kindergarten",
            "9th grade",
            "county",
            "Percent",
            "Eligible FRPM",
            "Ages 5-17",
            "FRPM Count",
            "Enrollment",
            "FRPM"
        ],
        "status": "success"
    },
    {
        "node_type": "entity_retrieval",
        "similar_columns": {
            "schools": [
                "County",
                "County"
            ]
        },
        "similar_values": {
            "schools": {
                "City": [
                    "Los Angeles"
                ],
                "MailCity": [
                    "Los Angeles"
                ],
                "School": [
                    "Birch Kindergarten"
                ],
                "County": [
                    "Los Angeles"
                ],
                "District": [
                    "CEA Los Angeles Co"
                ],
                "GSserved": [
                    "5-11"
                ],
                "GSoffered": [
                    "5-12"
                ],
                "AdmLName2": [
                    "Agee"
                ]
            },
            "frpm": {
                "School Name": [
                    "Los Amigos"
                ],
                "County Name": [
                    "Los Angeles"
                ],
                "District Name": [
                    "Los Angeles Unified"
                ]
            },
            "satscores": {
                "cname": [
                    "Los Angeles"
                ]
            }
        },
        "status": "success"
    },
    {
        "node_type": "context_retrieval",
        "schema_with_descriptions": {
            "schools": {
                "soc": {
                    "column_name": "School Ownership Code",
                    "column_description": "The School Ownership Code is a numeric code used to identify the type of school.",
                    "value_description": "\u2022      08 - Preschool       \u2022       09 \u2013 Special Education Schools (Public) \u2022      11 \u2013 Youth Authority Facilities (CEA) \u2022       13 \u2013 Opportunity Schools \u2022       14 \u2013 Juvenile Court Schools \u2022       15 \u2013 Other County or District Programs \u2022       31 \u2013 State Special Schools \u2022       60 \u2013 Elementary School (Public) \u2022       61 \u2013 Elementary School in 1 School District (Public) \u2022       62 \u2013 Intermediate/Middle Schools (Public) \u2022       63 \u2013 Alternative Schools of Choice \u2022       64 \u2013 Junior High Schools (Public) \u2022       65 \u2013 K-12 Schools (Public) \u2022       66 \u2013 High Schools (Public) \u2022       67 \u2013 High Schools in 1 School District (Public) \u2022       68 \u2013 Continuation High Schools \u2022       69 \u2013 District Community Day Schools \u2022       70 \u2013 Adult Education Centers \u2022       98 \u2013 Regional Occupational Center/Program (ROC/P)"
                },
                "eilcode": {
                    "column_name": "Educational Instruction Level Code",
                    "column_description": "The Educational Instruction Level Code is a short text description of the institution's type relative to the grade range served.",
                    "value_description": "\u2022       A \u2013 Adult \u2022       ELEM \u2013 Elementary \u2022       ELEMHIGH \u2013 Elementary-High Combination \u2022       HS \u2013 High School \u2022       INTMIDJR \u2013 Intermediate/Middle/Junior High \u2022       PS \u2013 Preschool \u2022       UG \u2013 Ungraded"
                },
                "gsoffered": {
                    "column_name": "grade span offered",
                    "column_description": "The grade span offered is the lowest grade and the highest grade offered or supported by the school, district, or administrative authority. This field might differ from the grade span served as reported in the most recent certified California Longitudinal Pupil Achievement (CALPADS) Fall 1 data collection.",
                    "value_description": "For example XYZ School might display the following data:  GSoffered = P\u2013Adult  GSserved = K\u201312"
                },
                "gsserved": {
                    "column_name": "grade span served.",
                    "column_description": "It is the lowest grade and the highest grade of student enrollment as reported in the most recent certified CALPADS Fall 1 data collection. Only K\u201312 enrollment is reported through CALPADS. This field may differ from the grade span offered.",
                    "value_description": "1.\u00a0\u00a0\u00a0\u00a0 Only K\u201312 enrollment is reported through CALPADS  2.\u00a0\u00a0\u00a0\u00a0 Note: Special programs at independent study, alternative education, and special education schools will often exceed the typical grade span for schools of that type"
                }
            },
            "satscores": {
                "cds": {
                    "column_name": "",
                    "column_description": "California Department Schools",
                    "value_description": ""
                },
                "enroll12": {
                    "column_name": "enrollment (1st-12nd grade)",
                    "column_description": "enrollment (1st-12nd grade)",
                    "value_description": ""
                }
            },
            "frpm": {
                "frpm count (k-12)": {
                    "column_name": "",
                    "column_description": "Free or Reduced Price Meal Count (K-12)",
                    "value_description": "eligible FRPM rate = FRPM / Enrollment"
                },
                "enrollment (ages 5-17)": {
                    "column_name": "",
                    "column_description": "Enrollment (Ages 5-17)",
                    "value_description": ""
                },
                "enrollment (k-12)": {
                    "column_name": "",
                    "column_description": "Enrollment (K-12)",
                    "value_description": "K-12: 1st grade - 12nd grade"
                }
            }
        },
        "status": "success"
    },
    {
        "node_type": "column_filtering",
        "tentative_schema": {
            "frpm": [
                "CDSCode",
                "Academic Year",
                "County Code",
                "School Code",
                "County Name",
                "District Name",
                "School Name",
                "School Type",
                "Charter School Number",
                "IRC",
                "Low Grade",
                "High Grade",
                "Enrollment (K-12)",
                "Free Meal Count (K-12)",
                "Percent (%) Eligible Free (K-12)",
                "FRPM Count (K-12)",
                "Percent (%) Eligible FRPM (K-12)",
                "Enrollment (Ages 5-17)",
                "Free Meal Count (Ages 5-17)",
                "Percent (%) Eligible Free (Ages 5-17)",
                "FRPM Count (Ages 5-17)",
                "Percent (%) Eligible FRPM (Ages 5-17)"
            ],
            "satscores": [
                "cds",
                "sname",
                "cname",
                "enroll12"
            ],
            "schools": [
                "CDSCode",
                "County",
                "School",
                "City",
                "MailCity",
                "EILCode",
                "GSoffered",
                "GSserved"
            ]
        },
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "success",
        "missing_columns": [],
        "correct_columns": {
            "schools": [
                "school",
                "cdscode",
                "county",
                "gsserved"
            ],
            "frpm": [
                "Enrollment (Ages 5-17)",
                "cdscode",
                "FRPM Count (Ages 5-17)"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "table_selection",
        "tentative_schema": {
            "frpm": [
                "CDSCode",
                "Academic Year",
                "County Code",
                "School Code",
                "County Name",
                "District Name",
                "School Name",
                "School Type",
                "Charter School Number",
                "IRC",
                "Low Grade",
                "High Grade",
                "Enrollment (K-12)",
                "Free Meal Count (K-12)",
                "Percent (%) Eligible Free (K-12)",
                "FRPM Count (K-12)",
                "Percent (%) Eligible FRPM (K-12)",
                "Enrollment (Ages 5-17)",
                "Free Meal Count (Ages 5-17)",
                "Percent (%) Eligible Free (Ages 5-17)",
                "FRPM Count (Ages 5-17)",
                "Percent (%) Eligible FRPM (Ages 5-17)"
            ],
            "schools": [
                "CDSCode",
                "County",
                "School",
                "City",
                "MailCity",
                "EILCode",
                "GSoffered",
                "GSserved"
            ]
        },
        "chain_of_thought_reasoning": "The question asks for schools that served a grade span of Kindergarten to 9th grade in the county of Los Angeles and the corresponding Percent (%) Eligible FRPM (Ages 5-17). The hint provides the formula to calculate this percentage. The county information is available in the frpm table, the school information is available in the schools table, and the FRPM and enrollment data is available in the frpm table. Therefore, we need to use the frpm and schools tables to answer the question.",
        "selected_tables": [
            "frpm",
            "schools"
        ],
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "success",
        "missing_columns": [],
        "correct_columns": {
            "schools": [
                "school",
                "cdscode",
                "county",
                "gsserved"
            ],
            "frpm": [
                "Enrollment (Ages 5-17)",
                "cdscode",
                "FRPM Count (Ages 5-17)"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "column_selection",
        "tentative_schema": {
            "frpm": [
                "CDSCode",
                "County Code",
                "Low Grade",
                "High Grade",
                "Enrollment (Ages 5-17)",
                "FRPM Count (Ages 5-17)"
            ],
            "schools": [
                "CDSCode",
                "County",
                "GSserved"
            ]
        },
        "model_selected_columns": {
            "frpm": [
                "CDSCode",
                "County Code",
                "Low Grade",
                "High Grade",
                "Enrollment (Ages 5-17)",
                "FRPM Count (Ages 5-17)"
            ],
            "schools": [
                "CDSCode",
                "County",
                "GSserved"
            ]
        },
        "chain_of_thought_reasoning": "The question asks for schools that served a grade span of Kindergarten to 9th grade in the county of Los Angeles and the Percent (%) Eligible FRPM (Ages 5-17). The hint provides the formula to calculate this percentage. To answer the question, we need to filter schools by county and grade span, and then calculate the percentage. The necessary columns are those that provide the county, grade span, and the required calculations.",
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "missing_column",
        "missing_columns": [
            "'schools'.'school'"
        ],
        "correct_columns": {
            "schools": [
                "school",
                "cdscode",
                "county",
                "gsserved"
            ],
            "frpm": [
                "Enrollment (Ages 5-17)",
                "cdscode",
                "FRPM Count (Ages 5-17)"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "candidate_generation",
        "SQL": "SELECT T1.CDSCode, CAST(T1.`FRPM Count (Ages 5-17)` AS REAL) * 100 / T1.`Enrollment (Ages 5-17)` FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T2.County = 'Los Angeles' AND T2.GSserved = '5-11' ",
        "status": "success"
    },
    {
        "node_type": "revision",
        "chain_of_thought_reasoning": "I started by identifying the columns needed for the query. I needed the CDSCode, the FRPM Count (Ages 5-17), and the Enrollment (Ages 5-17) for schools in the county of Los Angeles that served a grade span of Kindergarten to 9th grade. I then joined the frpm and schools tables on the CDSCode. I filtered the results to only include schools in the county of Los Angeles and those that served a grade span of 5-11. Finally, I calculated the Percent (%) Eligible FRPM (Ages 5-17) by dividing the FRPM Count (Ages 5-17) by the Enrollment (Ages 5-17) and multiplying by 100.",
        "SQL": "SELECT T1.CDSCode, (T1.`FRPM Count (Ages 5-17)` / T1.`Enrollment (Ages 5-17)` * 100) AS Percent_Eligible_FRPM FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T2.County = 'Los Angeles' AND T2.GSserved = '5-11'",
        "status": "success"
    },
    {
        "node_type": "evaluation",
        "candidate_generation": {
            "exec_res": 0,
            "exec_err": "incorrect answer",
            "Question": "Which schools served a grade span of Kindergarten to 9th grade in the county of Los Angeles and what is its Percent (%) Eligible FRPM (Ages 5-17)?",
            "Evidence": "Percent (%) Eligible FRPM (Ages 5-17) can be acquired by `FRPM Count (Ages 5-17)` / `Enrollment (Ages 5-17)` * 100",
            "GOLD_SQL": "SELECT T2.School, T1.`FRPM Count (Ages 5-17)` * 100 / T1.`Enrollment (Ages 5-17)` FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T2.County = 'Los Angeles' AND T2.GSserved = 'K-9'",
            "PREDICTED_SQL": "SELECT T1.CDSCode, CAST(T1.`FRPM Count (Ages 5-17)` AS REAL) * 100 / T1.`Enrollment (Ages 5-17)` FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T2.County = 'Los Angeles' AND T2.GSserved = '5-11' "
        },
        "revision": {
            "exec_res": 0,
            "exec_err": "incorrect answer",
            "Question": "Which schools served a grade span of Kindergarten to 9th grade in the county of Los Angeles and what is its Percent (%) Eligible FRPM (Ages 5-17)?",
            "Evidence": "Percent (%) Eligible FRPM (Ages 5-17) can be acquired by `FRPM Count (Ages 5-17)` / `Enrollment (Ages 5-17)` * 100",
            "GOLD_SQL": "SELECT T2.School, T1.`FRPM Count (Ages 5-17)` * 100 / T1.`Enrollment (Ages 5-17)` FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T2.County = 'Los Angeles' AND T2.GSserved = 'K-9'",
            "PREDICTED_SQL": "SELECT T1.CDSCode, (T1.`FRPM Count (Ages 5-17)` / T1.`Enrollment (Ages 5-17)` * 100) AS Percent_Eligible_FRPM FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T2.County = 'Los Angeles' AND T2.GSserved = '5-11'"
        },
        "status": "success"
    }
]