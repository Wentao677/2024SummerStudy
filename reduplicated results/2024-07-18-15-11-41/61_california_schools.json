[
    {
        "node_type": "keyword_extraction",
        "keywords": [
            "chartered schools",
            "Hickman",
            "Elementary School District",
            "city",
            "owned",
            "DOC",
            "52",
            "Charter",
            "1",
            "table",
            "schools"
        ],
        "status": "success"
    },
    {
        "node_type": "entity_retrieval",
        "similar_columns": {
            "schools": [
                "School",
                "District",
                "City",
                "DOC",
                "Charter",
                "School"
            ]
        },
        "similar_values": {
            "schools": {
                "School": [
                    "Ray Elementary"
                ],
                "AdmLName1": [
                    "Hickman"
                ],
                "MailCity": [
                    "Hickman"
                ],
                "City": [
                    "Hickman"
                ],
                "MailStrAbr": [
                    "Various Schools In District"
                ],
                "MailStreet": [
                    "Various Schools In District"
                ],
                "EILName": [
                    "Elementary"
                ],
                "SOC": [
                    "66"
                ],
                "GSoffered": [
                    "6"
                ]
            },
            "frpm": {
                "School Name": [
                    "Lee Elementary"
                ],
                "District Type": [
                    "Elementary School District"
                ],
                "District Name": [
                    "Rio Elementary"
                ],
                "County Code": [
                    "28"
                ]
            }
        },
        "status": "success"
    },
    {
        "node_type": "context_retrieval",
        "schema_with_descriptions": {
            "schools": {
                "soc": {
                    "column_name": "School Ownership Code",
                    "column_description": "The School Ownership Code is a numeric code used to identify the type of school.",
                    "value_description": "\u2022      08 - Preschool       \u2022       09 \u2013 Special Education Schools (Public) \u2022      11 \u2013 Youth Authority Facilities (CEA) \u2022       13 \u2013 Opportunity Schools \u2022       14 \u2013 Juvenile Court Schools \u2022       15 \u2013 Other County or District Programs \u2022       31 \u2013 State Special Schools \u2022       60 \u2013 Elementary School (Public) \u2022       61 \u2013 Elementary School in 1 School District (Public) \u2022       62 \u2013 Intermediate/Middle Schools (Public) \u2022       63 \u2013 Alternative Schools of Choice \u2022       64 \u2013 Junior High Schools (Public) \u2022       65 \u2013 K-12 Schools (Public) \u2022       66 \u2013 High Schools (Public) \u2022       67 \u2013 High Schools in 1 School District (Public) \u2022       68 \u2013 Continuation High Schools \u2022       69 \u2013 District Community Day Schools \u2022       70 \u2013 Adult Education Centers \u2022       98 \u2013 Regional Occupational Center/Program (ROC/P)"
                },
                "website": {
                    "column_name": "",
                    "column_description": "The website address of the school, district, or administrative authority.",
                    "value_description": "The website address of the school, district, or administrative authority."
                },
                "admlname1": {
                    "column_name": "administrator's last name",
                    "column_description": "administrator's last name",
                    "value_description": "The superintendent\u2019s or principal\u2019s last name.   Only active and pending districts and schools will display administrator information, if applicable."
                },
                "admfname1": {
                    "column_name": "administrator's first name",
                    "column_description": "administrator's first name",
                    "value_description": "The superintendent\u2019s or principal\u2019s first name.    Only active and pending districts and schools will display administrator information, if applicable."
                },
                "charter": {
                    "column_name": "",
                    "column_description": "This field identifies a charter school.",
                    "value_description": "The field is coded as follows:  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 1 = The school is a charter  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0 = The school is not a charter"
                },
                "charternum": {
                    "column_name": "",
                    "column_description": "The charter school number,",
                    "value_description": "4-digit number assigned to a charter school."
                },
                "fundingtype": {
                    "column_name": "",
                    "column_description": "Indicates the charter school funding type",
                    "value_description": "Values are as follows:  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Not in CS (California School) funding model  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Locally funded  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Directly funded"
                },
                "doc": {
                    "column_name": "District Ownership Code",
                    "column_description": "District Ownership Code",
                    "value_description": "The District Ownership Code (DOC) is the numeric code used to identify the category of the Administrative Authority. \u2022       00 - County Office of Education \u2022       02 \u2013 State Board of Education \u2022       03 \u2013 Statewide Benefit Charter \u2022       31 \u2013 State Special Schools \u2022       34 \u2013 Non-school Location* \u2022       52 \u2013 Elementary School District \u2022       54 \u2013 Unified School District \u2022       56 \u2013 High School District \u2022       98 \u2013 Regional Occupational Center/Program (ROC/P)  *Only the California Education Authority has been included in the non-school location category."
                }
            },
            "frpm": {
                "charter school number": {
                    "column_name": "",
                    "column_description": "Charter School Number",
                    "value_description": ""
                },
                "charter school (y/n)": {
                    "column_name": "",
                    "column_description": "Charter School (Y/N)",
                    "value_description": "0: N; 1: Y"
                }
            }
        },
        "status": "success"
    },
    {
        "node_type": "column_filtering",
        "tentative_schema": {
            "frpm": [
                "CDSCode",
                "District Code",
                "District Name",
                "School Name",
                "District Type",
                "Charter School (Y/N)",
                "Charter School Number"
            ],
            "satscores": [
                "sname",
                "dname",
                "cds"
            ],
            "schools": [
                "County",
                "District",
                "School",
                "City",
                "MailCity",
                "Charter",
                "CharterNum",
                "DOC",
                "DOCType",
                "SOC",
                "CDSCode"
            ]
        },
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "success",
        "missing_columns": [],
        "correct_columns": {
            "schools": [
                "school",
                "city",
                "doc",
                "charter"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "table_selection",
        "tentative_schema": {
            "schools": [
                "County",
                "District",
                "School",
                "City",
                "MailCity",
                "Charter",
                "CharterNum",
                "DOC",
                "DOCType",
                "SOC",
                "CDSCode"
            ]
        },
        "chain_of_thought_reasoning": "The question asks for the number of chartered schools located in the city of Hickman that are owned by the Elementary School District. The hint provides specific values for DOC and Charter, which helps to narrow down the search. The table 'schools' is necessary because it contains the information about the school's ownership (DOC) and whether it is a chartered school (Charter). The table 'frpm' is not necessary because it only provides information about the school's district and does not contain the required information. The table 'satscores' is not necessary because it only provides information about the school's scores and does not contain the required information.",
        "selected_tables": [
            "schools"
        ],
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "success",
        "missing_columns": [],
        "correct_columns": {
            "schools": [
                "school",
                "city",
                "doc",
                "charter"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "column_selection",
        "tentative_schema": {
            "schools": [
                "CDSCode",
                "City",
                "Charter",
                "DOC"
            ]
        },
        "model_selected_columns": {
            "schools": [
                "CDSCode",
                "City",
                "Charter",
                "DOC"
            ]
        },
        "chain_of_thought_reasoning": "The question asks for chartered schools located in the city of Hickman and owned by the Elementary School District. The hint provides information about chartered schools (Charter = 1) and Elementary School District (DOC = 52). We need to filter schools based on these conditions and the city of Hickman. The School table has the necessary information.",
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "missing_column",
        "missing_columns": [
            "'schools'.'school'"
        ],
        "correct_columns": {
            "schools": [
                "school",
                "city",
                "doc",
                "charter"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "candidate_generation",
        "SQL": "SELECT COUNT(CDSCode) FROM schools WHERE City = 'Hickman' AND Charter = 1 AND DOC = 52 ",
        "status": "success"
    },
    {
        "node_type": "revision",
        "chain_of_thought_reasoning": "I started by identifying the columns that are relevant to the question. The question asks for chartered schools located in the city of Hickman that are owned by the Elementary School District. I found that the Elementary School District refers to DOC = 52, and chartered schools refer to Charter = 1. I then used these conditions to construct the SQL query.",
        "SQL": "SELECT COUNT(CDSCode) FROM schools WHERE City = 'Hickman' AND Charter = 1 AND DOC = 52",
        "status": "success"
    },
    {
        "node_type": "evaluation",
        "candidate_generation": {
            "exec_res": 1,
            "exec_err": "--",
            "Question": "How many chartered schools located in the city of Hickman are owned by the Elementary School District?",
            "Evidence": "Elementary School District refers to DOC = 52; Chartered schools refer to Charter = 1 in the table schools",
            "GOLD_SQL": "SELECT COUNT(School) FROM schools WHERE DOC = 52 AND Charter = 1 AND City = 'Hickman'",
            "PREDICTED_SQL": "SELECT COUNT(CDSCode) FROM schools WHERE City = 'Hickman' AND Charter = 1 AND DOC = 52 "
        },
        "revision": {
            "exec_res": 1,
            "exec_err": "--",
            "Question": "How many chartered schools located in the city of Hickman are owned by the Elementary School District?",
            "Evidence": "Elementary School District refers to DOC = 52; Chartered schools refer to Charter = 1 in the table schools",
            "GOLD_SQL": "SELECT COUNT(School) FROM schools WHERE DOC = 52 AND Charter = 1 AND City = 'Hickman'",
            "PREDICTED_SQL": "SELECT COUNT(CDSCode) FROM schools WHERE City = 'Hickman' AND Charter = 1 AND DOC = 52"
        },
        "status": "success"
    }
]