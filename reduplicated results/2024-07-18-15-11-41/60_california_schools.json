[
    {
        "node_type": "keyword_extraction",
        "keywords": [
            "partially virtual",
            "chartered schools",
            "San Joaquin",
            "websites",
            "Virtual",
            "Charter",
            "P",
            "table schools"
        ],
        "status": "success"
    },
    {
        "node_type": "entity_retrieval",
        "similar_columns": {
            "schools": [
                "Virtual",
                "School",
                "Website",
                "Virtual",
                "Charter",
                "School"
            ]
        },
        "similar_values": {
            "schools": {
                "School": [
                    "Rim Virtual",
                    "Epic Charter School",
                    "Virtual Pre"
                ],
                "AdmLName1": [
                    "Sanft"
                ],
                "City": [
                    "San Joaquin"
                ],
                "MailCity": [
                    "San Joaquin"
                ],
                "County": [
                    "San Joaquin"
                ],
                "AdmFName1": [
                    "Joaquin"
                ],
                "District": [
                    "CEA San Joaquin Co"
                ]
            },
            "frpm": {
                "School Name": [
                    "Epic Charter"
                ],
                "County Name": [
                    "San Joaquin"
                ]
            },
            "satscores": {
                "sname": [
                    "Riverside Virtual"
                ],
                "cname": [
                    "San Joaquin"
                ]
            }
        },
        "status": "success"
    },
    {
        "node_type": "context_retrieval",
        "schema_with_descriptions": {
            "satscores": {
                "cds": {
                    "column_name": "",
                    "column_description": "California Department Schools",
                    "value_description": ""
                }
            },
            "schools": {
                "virtual": {
                    "column_name": "",
                    "column_description": "This field identifies the type of virtual instruction offered by the school. Virtual instruction is instruction in which students and teachers are separated by time and/or location, and interaction occurs via computers and/or telecommunications technologies.",
                    "value_description": "The field is coded as follows:  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 F = Exclusively Virtual \u2013 The school has no physical building where students meet with each other or with teachers, all instruction is virtual.  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 V = Primarily Virtual \u2013 The school focuses on a systematic program of virtual instruction but includes some physical meetings among students or with teachers.  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 C = Primarily Classroom \u2013 The school offers virtual courses but virtual instruction is not the primary means of instruction.  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 N = Not Virtual \u2013 The school does not offer any virtual instruction.  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 P = Partial Virtual \u2013 The school offers some, but not all, instruction through virtual instruction. Note: This value was retired and replaced with the Primarily Virtual and Primarily Classroom values beginning with the 2016\u201317 school year."
                },
                "website": {
                    "column_name": "",
                    "column_description": "The website address of the school, district, or administrative authority.",
                    "value_description": "The website address of the school, district, or administrative authority."
                },
                "fundingtype": {
                    "column_name": "",
                    "column_description": "Indicates the charter school funding type",
                    "value_description": "Values are as follows:  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Not in CS (California School) funding model  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Locally funded  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Directly funded"
                },
                "charter": {
                    "column_name": "",
                    "column_description": "This field identifies a charter school.",
                    "value_description": "The field is coded as follows:  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 1 = The school is a charter  \u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0 = The school is not a charter"
                },
                "charternum": {
                    "column_name": "",
                    "column_description": "The charter school number,",
                    "value_description": "4-digit number assigned to a charter school."
                },
                "soc": {
                    "column_name": "School Ownership Code",
                    "column_description": "The School Ownership Code is a numeric code used to identify the type of school.",
                    "value_description": "\u2022      08 - Preschool       \u2022       09 \u2013 Special Education Schools (Public) \u2022      11 \u2013 Youth Authority Facilities (CEA) \u2022       13 \u2013 Opportunity Schools \u2022       14 \u2013 Juvenile Court Schools \u2022       15 \u2013 Other County or District Programs \u2022       31 \u2013 State Special Schools \u2022       60 \u2013 Elementary School (Public) \u2022       61 \u2013 Elementary School in 1 School District (Public) \u2022       62 \u2013 Intermediate/Middle Schools (Public) \u2022       63 \u2013 Alternative Schools of Choice \u2022       64 \u2013 Junior High Schools (Public) \u2022       65 \u2013 K-12 Schools (Public) \u2022       66 \u2013 High Schools (Public) \u2022       67 \u2013 High Schools in 1 School District (Public) \u2022       68 \u2013 Continuation High Schools \u2022       69 \u2013 District Community Day Schools \u2022       70 \u2013 Adult Education Centers \u2022       98 \u2013 Regional Occupational Center/Program (ROC/P)"
                }
            },
            "frpm": {
                "charter school number": {
                    "column_name": "",
                    "column_description": "Charter School Number",
                    "value_description": ""
                },
                "charter school (y/n)": {
                    "column_name": "",
                    "column_description": "Charter School (Y/N)",
                    "value_description": "0: N; 1: Y"
                }
            }
        },
        "status": "success"
    },
    {
        "node_type": "column_filtering",
        "tentative_schema": {
            "frpm": [
                "School Code",
                "Educational Option Type",
                "Charter School (Y/N)",
                "Charter School Number",
                "CDSCode"
            ],
            "satscores": [
                "cds"
            ],
            "schools": [
                "CDSCode",
                "County",
                "District",
                "School",
                "City",
                "Zip",
                "MailCity",
                "Website",
                "Charter",
                "CharterNum",
                "DOC",
                "SOC",
                "SOCType",
                "EdOpsCode",
                "GSoffered",
                "Virtual"
            ]
        },
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "success",
        "missing_columns": [],
        "correct_columns": {
            "schools": [
                "website",
                "charter",
                "county",
                "virtual"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "table_selection",
        "tentative_schema": {
            "schools": [
                "CDSCode",
                "County",
                "District",
                "School",
                "City",
                "Zip",
                "MailCity",
                "Website",
                "Charter",
                "CharterNum",
                "DOC",
                "SOC",
                "SOCType",
                "EdOpsCode",
                "GSoffered",
                "Virtual"
            ]
        },
        "chain_of_thought_reasoning": "The question asks for the websites of partially virtual chartered schools in San Joaquin. The hint clarifies that 'Virtual = P' means partially virtual and 'Charter schools' refers to 'Charter = 1' in the schools table. This hint helps identify the necessary tables. The 'Virtual' column in the schools table indicates the type of virtual instruction offered by the school, and the 'Charter' column identifies charter schools. The 'City' column in the schools table is used to filter schools in San Joaquin. The 'Website' column in the schools table provides the required information. The frpm table is not necessary for this question.",
        "selected_tables": [
            "schools"
        ],
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "success",
        "missing_columns": [],
        "correct_columns": {
            "schools": [
                "website",
                "charter",
                "county",
                "virtual"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "column_selection",
        "tentative_schema": {
            "schools": [
                "CDSCode",
                "Website",
                "Charter"
            ]
        },
        "model_selected_columns": {
            "schools": [
                "CDSCode",
                "Website",
                "Charter"
            ]
        },
        "chain_of_thought_reasoning": "The question asks for websites of partially virtual chartered schools in San Joaquin. The hint mentions Virtual = 'P' for partially virtual and Charter = 1 for chartered schools. We need to filter schools by San Joaquin, partially virtual, and chartered. The Website column is necessary to provide the required information. The CDSCode column is necessary to identify the schools in San Joaquin. The Charter column is necessary to filter chartered schools.",
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "missing_column",
        "missing_columns": [
            "'schools'.'county'",
            "'schools'.'virtual'"
        ],
        "correct_columns": {
            "schools": [
                "website",
                "charter",
                "county",
                "virtual"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "candidate_generation",
        "SQL": "SELECT Website FROM schools WHERE Charter = 1 ",
        "status": "success"
    },
    {
        "node_type": "revision",
        "chain_of_thought_reasoning": "I first identified the hint that 'Virtual = 'P' means partially virtual' and 'Charter schools refers to Charter = 1 in the table schools'. Then, I used these conditions to filter the schools table and selected the Website column. I also used the County column to filter schools located in San Joaquin.",
        "SQL": "SELECT Website FROM schools WHERE Charter = 1 AND County = 'San Joaquin' AND Virtual = 'P'",
        "status": "success"
    },
    {
        "node_type": "evaluation",
        "candidate_generation": {
            "exec_res": 0,
            "exec_err": "incorrect answer",
            "Question": "What are the websites for all the partially virtual chartered schools located in San Joaquin?",
            "Evidence": "Virtual = 'P' means partially virtual; Charter schools refers to Charter = 1 in the table schools",
            "GOLD_SQL": "SELECT Website FROM schools WHERE County = 'San Joaquin' AND Virtual = 'P' AND Charter = 1",
            "PREDICTED_SQL": "SELECT Website FROM schools WHERE Charter = 1 "
        },
        "revision": {
            "exec_res": 1,
            "exec_err": "--",
            "Question": "What are the websites for all the partially virtual chartered schools located in San Joaquin?",
            "Evidence": "Virtual = 'P' means partially virtual; Charter schools refers to Charter = 1 in the table schools",
            "GOLD_SQL": "SELECT Website FROM schools WHERE County = 'San Joaquin' AND Virtual = 'P' AND Charter = 1",
            "PREDICTED_SQL": "SELECT Website FROM schools WHERE Charter = 1 AND County = 'San Joaquin' AND Virtual = 'P'"
        },
        "status": "success"
    }
]