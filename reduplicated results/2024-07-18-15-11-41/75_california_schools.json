[
    {
        "node_type": "keyword_extraction",
        "keywords": [
            "educational level",
            "Breakfast Provision 2",
            "county code",
            "37",
            "school",
            "name"
        ],
        "status": "success"
    },
    {
        "node_type": "entity_retrieval",
        "similar_columns": {
            "schools": [
                "County",
                "School"
            ]
        },
        "similar_values": {
            "schools": {
                "School": [
                    "Adult Education"
                ],
                "GSoffered": [
                    "6"
                ],
                "MailCity": [
                    "Canyon County"
                ],
                "City": [
                    "Canyon County"
                ],
                "District": [
                    "Tri-County ROP"
                ],
                "SOC": [
                    "63"
                ],
                "AdmLName1": [
                    "Schooler"
                ]
            },
            "frpm": {
                "NSLP Provision Status": [
                    "Provision 2",
                    "Breakfast Provision 2"
                ],
                "County Code": [
                    "23"
                ]
            }
        },
        "status": "success"
    },
    {
        "node_type": "context_retrieval",
        "schema_with_descriptions": {
            "schools": {
                "soc": {
                    "column_name": "School Ownership Code",
                    "column_description": "The School Ownership Code is a numeric code used to identify the type of school.",
                    "value_description": "\u2022      08 - Preschool       \u2022       09 \u2013 Special Education Schools (Public) \u2022      11 \u2013 Youth Authority Facilities (CEA) \u2022       13 \u2013 Opportunity Schools \u2022       14 \u2013 Juvenile Court Schools \u2022       15 \u2013 Other County or District Programs \u2022       31 \u2013 State Special Schools \u2022       60 \u2013 Elementary School (Public) \u2022       61 \u2013 Elementary School in 1 School District (Public) \u2022       62 \u2013 Intermediate/Middle Schools (Public) \u2022       63 \u2013 Alternative Schools of Choice \u2022       64 \u2013 Junior High Schools (Public) \u2022       65 \u2013 K-12 Schools (Public) \u2022       66 \u2013 High Schools (Public) \u2022       67 \u2013 High Schools in 1 School District (Public) \u2022       68 \u2013 Continuation High Schools \u2022       69 \u2013 District Community Day Schools \u2022       70 \u2013 Adult Education Centers \u2022       98 \u2013 Regional Occupational Center/Program (ROC/P)"
                },
                "eilname": {
                    "column_name": "Educational Instruction Level Name",
                    "column_description": "The Educational Instruction Level Name is the long text description of the institution\u2019s type relative to the grade range served.",
                    "value_description": "The Educational Instruction Level Name is the long text description of the institution\u2019s type relative to the grade range served."
                },
                "edopscode": {
                    "column_name": "Education Option Code",
                    "column_description": "The Education Option Code is a short text description of the type of education offered.",
                    "value_description": "\u2022      ALTSOC \u2013 Alternative School of Choice \u2022      COMM \u2013 County Community School \u2022       COMMDAY \u2013 Community Day School \u2022       CON \u2013 Continuation School \u2022       JUV \u2013 Juvenile Court School \u2022       OPP \u2013 Opportunity School \u2022       YTH \u2013 Youth Authority School \u2022       SSS \u2013 State Special School \u2022       SPEC \u2013 Special Education School \u2022       TRAD \u2013 Traditional \u2022       ROP \u2013 Regional Occupational Program \u2022       HOMHOS \u2013 Home and Hospital \u2022       SPECON \u2013 District Consortia Special Education School"
                },
                "eilcode": {
                    "column_name": "Educational Instruction Level Code",
                    "column_description": "The Educational Instruction Level Code is a short text description of the institution's type relative to the grade range served.",
                    "value_description": "\u2022       A \u2013 Adult \u2022       ELEM \u2013 Elementary \u2022       ELEMHIGH \u2013 Elementary-High Combination \u2022       HS \u2013 High School \u2022       INTMIDJR \u2013 Intermediate/Middle/Junior High \u2022       PS \u2013 Preschool \u2022       UG \u2013 Ungraded"
                },
                "soctype": {
                    "column_name": "School Ownership Code Type",
                    "column_description": "The School Ownership Code Type is the text description of the type of school.",
                    "value_description": "The School Ownership Code Type is the text description of the type of school."
                },
                "county": {
                    "column_name": "",
                    "column_description": "County name",
                    "value_description": ""
                },
                "charternum": {
                    "column_name": "",
                    "column_description": "The charter school number,",
                    "value_description": "4-digit number assigned to a charter school."
                },
                "admfname2": {
                    "column_name": "",
                    "column_description": "",
                    "value_description": "SAME as 1"
                },
                "gsoffered": {
                    "column_name": "grade span offered",
                    "column_description": "The grade span offered is the lowest grade and the highest grade offered or supported by the school, district, or administrative authority. This field might differ from the grade span served as reported in the most recent certified California Longitudinal Pupil Achievement (CALPADS) Fall 1 data collection.",
                    "value_description": "For example XYZ School might display the following data:  GSoffered = P\u2013Adult  GSserved = K\u201312"
                },
                "ext": {
                    "column_name": "extension",
                    "column_description": "The phone number extension of the school, district, or administrative authority.",
                    "value_description": "The phone number extension of the school, district, or administrative authority."
                },
                "state": {
                    "column_name": "",
                    "column_description": "State",
                    "value_description": ""
                },
                "phone": {
                    "column_name": "",
                    "column_description": "Phone",
                    "value_description": ""
                },
                "school": {
                    "column_name": "",
                    "column_description": "School",
                    "value_description": ""
                },
                "street": {
                    "column_name": "",
                    "column_description": "Street",
                    "value_description": ""
                }
            },
            "frpm": {
                "school code": {
                    "column_name": "",
                    "column_description": "School Code",
                    "value_description": ""
                },
                "low grade": {
                    "column_name": "",
                    "column_description": "Low Grade",
                    "value_description": ""
                },
                "free meal count (k-12)": {
                    "column_name": "",
                    "column_description": "Free Meal Count (K-12)",
                    "value_description": "eligible free rate = Free Meal Count / Enrollment"
                },
                "free meal count (ages 5-17)": {
                    "column_name": "",
                    "column_description": "Free Meal Count (Ages 5-17)",
                    "value_description": "eligible free rate = Free Meal Count / Enrollment"
                },
                "frpm count (k-12)": {
                    "column_name": "",
                    "column_description": "Free or Reduced Price Meal Count (K-12)",
                    "value_description": "eligible FRPM rate = FRPM / Enrollment"
                },
                "county code": {
                    "column_name": "",
                    "column_description": "County Code",
                    "value_description": ""
                },
                "county name": {
                    "column_name": "",
                    "column_description": "County Code",
                    "value_description": ""
                },
                "district code": {
                    "column_name": "",
                    "column_description": "District Code",
                    "value_description": ""
                },
                "school name": {
                    "column_name": "",
                    "column_description": "School Name",
                    "value_description": ""
                },
                "school type": {
                    "column_name": "",
                    "column_description": "School Type",
                    "value_description": ""
                }
            },
            "satscores": {
                "cname": {
                    "column_name": "county name",
                    "column_description": "county name",
                    "value_description": ""
                },
                "sname": {
                    "column_name": "school name",
                    "column_description": "school name",
                    "value_description": ""
                }
            }
        },
        "status": "success"
    },
    {
        "node_type": "column_filtering",
        "tentative_schema": {
            "frpm": [
                "CDSCode",
                "County Code",
                "School Code",
                "NSLP Provision Status"
            ],
            "satscores": [
                "sname",
                "dname",
                "cname",
                "cds"
            ],
            "schools": [
                "County",
                "School",
                "SOC",
                "EdOpsCode",
                "EdOpsName",
                "EILCode",
                "EILName",
                "AdmLName2",
                "AdmLName3",
                "CDSCode"
            ]
        },
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "success",
        "missing_columns": [],
        "correct_columns": {
            "schools": [
                "eilname",
                "school",
                "cdscode"
            ],
            "frpm": [
                "cdscode",
                "NSLP Provision Status",
                "County Code"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "table_selection",
        "tentative_schema": {
            "frpm": [
                "CDSCode",
                "County Code",
                "School Code",
                "NSLP Provision Status"
            ],
            "schools": [
                "County",
                "School",
                "SOC",
                "EdOpsCode",
                "EdOpsName",
                "EILCode",
                "EILName",
                "AdmLName2",
                "AdmLName3",
                "CDSCode"
            ],
            "satscores": [
                "sname",
                "dname",
                "cname",
                "cds"
            ]
        },
        "chain_of_thought_reasoning": "The question asks for the educational level name for schools with Breakfast Provision 2 in county code 37. The hint helps identify the relevant tables by focusing on the Breakfast Provision 2 and county code 37. The Breakfast Provision 2 is mentioned in the frpm table, and county code 37 is mentioned in the schools table. The educational level name is mentioned in the schools table. Therefore, the necessary tables are frpm, schools, and satscores.",
        "selected_tables": [
            "frpm",
            "schools",
            "satscores"
        ],
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "success",
        "missing_columns": [],
        "correct_columns": {
            "schools": [
                "eilname",
                "school",
                "cdscode"
            ],
            "frpm": [
                "cdscode",
                "NSLP Provision Status",
                "County Code"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "column_selection",
        "tentative_schema": {
            "frpm": [
                "CDSCode",
                "NSLP Provision Status"
            ],
            "schools": [
                "CDSCode",
                "County",
                "EdILName"
            ]
        },
        "model_selected_columns": {
            "frpm": [
                "CDSCode",
                "NSLP Provision Status"
            ],
            "schools": [
                "CDSCode",
                "County",
                "EdILName"
            ]
        },
        "chain_of_thought_reasoning": "The question asks for the educational level name for schools with Breakfast Provision 2 in county code 37. To answer this, we need to join the frpm and schools tables, filter schools by county code 37 and NSLP Provision Status 'Breakfast Provision 2', and then retrieve the educational level name. The hint points us towards the examples in the NSLP Provision Status column, which helps us identify the relevant column.",
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "missing_column",
        "missing_columns": [
            "'schools'.'eilname'",
            "'schools'.'school'",
            "'frpm'.'County Code'"
        ],
        "correct_columns": {
            "schools": [
                "eilname",
                "school",
                "cdscode"
            ],
            "frpm": [
                "cdscode",
                "NSLP Provision Status",
                "County Code"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "candidate_generation",
        "SQL": "SELECT DISTINCT T2.`NSLP Provision Status`, T1.CDSCode FROM schools AS T1 INNER JOIN frpm AS T2 ON T1.CDSCode = T2.CDSCode WHERE T2.`NSLP Provision Status` = 'Breakfast Provision 2' AND T1.County = 37 ",
        "status": "success"
    },
    {
        "node_type": "revision",
        "chain_of_thought_reasoning": "I started by identifying the relevant columns in the frpm table that match the given condition. I then joined the schools table with the frpm table based on the CDSCode. I filtered the results to only include schools with Breakfast Provision 2 in county code 37. Finally, I selected the distinct educational level name for the schools that match the condition.",
        "SQL": "SELECT T2.EILName FROM frpm AS T2 INNER JOIN schools AS T1 ON T2.CDSCode = T1.CDSCode WHERE T2.`NSLP Provision Status` = 'Breakfast Provision 2' AND T1.County = '37'",
        "status": "success"
    },
    {
        "node_type": "evaluation",
        "candidate_generation": {
            "exec_res": 0,
            "exec_err": "incorrect answer",
            "Question": "What is the educational level name for the schools with Breakfast Provision 2 in county code 37? Indicate the name of the school.",
            "Evidence": "",
            "GOLD_SQL": "SELECT T2.EILName, T2.School FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T1.`NSLP Provision Status` = 'Breakfast Provision 2' AND T1.`County Code` = 37",
            "PREDICTED_SQL": "SELECT DISTINCT T2.`NSLP Provision Status`, T1.CDSCode FROM schools AS T1 INNER JOIN frpm AS T2 ON T1.CDSCode = T2.CDSCode WHERE T2.`NSLP Provision Status` = 'Breakfast Provision 2' AND T1.County = 37 "
        },
        "revision": {
            "exec_res": 0,
            "exec_err": "no such column: T2.EILName",
            "Question": "What is the educational level name for the schools with Breakfast Provision 2 in county code 37? Indicate the name of the school.",
            "Evidence": "",
            "GOLD_SQL": "SELECT T2.EILName, T2.School FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T1.`NSLP Provision Status` = 'Breakfast Provision 2' AND T1.`County Code` = 37",
            "PREDICTED_SQL": "SELECT T2.EILName FROM frpm AS T2 INNER JOIN schools AS T1 ON T2.CDSCode = T1.CDSCode WHERE T2.`NSLP Provision Status` = 'Breakfast Provision 2' AND T1.County = '37'"
        },
        "status": "success"
    }
]