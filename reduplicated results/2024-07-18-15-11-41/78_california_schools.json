[
    {
        "node_type": "keyword_extraction",
        "keywords": [
            "city of Adelanto",
            "grade span",
            "most common type",
            "Adelanto"
        ],
        "status": "success"
    },
    {
        "node_type": "entity_retrieval",
        "similar_columns": {
            "schools": [
                "City"
            ]
        },
        "similar_values": {
            "schools": {
                "MailCity": [
                    "Adelanto"
                ],
                "City": [
                    "Adelanto"
                ],
                "School": [
                    "Adelanto High"
                ],
                "District": [
                    "Adelanto Elementary"
                ],
                "MailStrAbr": [
                    "Chng. Grade Span; See 6114144"
                ],
                "MailStreet": [
                    "Chng. Grade Span; See 6114144"
                ]
            },
            "satscores": {
                "sname": [
                    "Adelanto High"
                ]
            },
            "frpm": {
                "School Name": [
                    "Adelanto High"
                ]
            }
        },
        "status": "success"
    },
    {
        "node_type": "context_retrieval",
        "schema_with_descriptions": {
            "schools": {
                "gsoffered": {
                    "column_name": "grade span offered",
                    "column_description": "The grade span offered is the lowest grade and the highest grade offered or supported by the school, district, or administrative authority. This field might differ from the grade span served as reported in the most recent certified California Longitudinal Pupil Achievement (CALPADS) Fall 1 data collection.",
                    "value_description": "For example XYZ School might display the following data:  GSoffered = P\u2013Adult  GSserved = K\u201312"
                },
                "edopscode": {
                    "column_name": "Education Option Code",
                    "column_description": "The Education Option Code is a short text description of the type of education offered.",
                    "value_description": "\u2022      ALTSOC \u2013 Alternative School of Choice \u2022      COMM \u2013 County Community School \u2022       COMMDAY \u2013 Community Day School \u2022       CON \u2013 Continuation School \u2022       JUV \u2013 Juvenile Court School \u2022       OPP \u2013 Opportunity School \u2022       YTH \u2013 Youth Authority School \u2022       SSS \u2013 State Special School \u2022       SPEC \u2013 Special Education School \u2022       TRAD \u2013 Traditional \u2022       ROP \u2013 Regional Occupational Program \u2022       HOMHOS \u2013 Home and Hospital \u2022       SPECON \u2013 District Consortia Special Education School"
                },
                "soc": {
                    "column_name": "School Ownership Code",
                    "column_description": "The School Ownership Code is a numeric code used to identify the type of school.",
                    "value_description": "\u2022      08 - Preschool       \u2022       09 \u2013 Special Education Schools (Public) \u2022      11 \u2013 Youth Authority Facilities (CEA) \u2022       13 \u2013 Opportunity Schools \u2022       14 \u2013 Juvenile Court Schools \u2022       15 \u2013 Other County or District Programs \u2022       31 \u2013 State Special Schools \u2022       60 \u2013 Elementary School (Public) \u2022       61 \u2013 Elementary School in 1 School District (Public) \u2022       62 \u2013 Intermediate/Middle Schools (Public) \u2022       63 \u2013 Alternative Schools of Choice \u2022       64 \u2013 Junior High Schools (Public) \u2022       65 \u2013 K-12 Schools (Public) \u2022       66 \u2013 High Schools (Public) \u2022       67 \u2013 High Schools in 1 School District (Public) \u2022       68 \u2013 Continuation High Schools \u2022       69 \u2013 District Community Day Schools \u2022       70 \u2013 Adult Education Centers \u2022       98 \u2013 Regional Occupational Center/Program (ROC/P)"
                },
                "city": {
                    "column_name": "",
                    "column_description": "City",
                    "value_description": ""
                },
                "gsserved": {
                    "column_name": "grade span served.",
                    "column_description": "It is the lowest grade and the highest grade of student enrollment as reported in the most recent certified CALPADS Fall 1 data collection. Only K\u201312 enrollment is reported through CALPADS. This field may differ from the grade span offered.",
                    "value_description": "1.\u00a0\u00a0\u00a0\u00a0 Only K\u201312 enrollment is reported through CALPADS  2.\u00a0\u00a0\u00a0\u00a0 Note: Special programs at independent study, alternative education, and special education schools will often exceed the typical grade span for schools of that type"
                },
                "street": {
                    "column_name": "",
                    "column_description": "Street",
                    "value_description": ""
                },
                "mailcity": {
                    "column_name": "mailing city",
                    "column_description": "",
                    "value_description": "The city associated with the mailing address of the school, district, or administrative authority. Note: Many entities have not provided a mailing address city. For your convenience we have filled the unpopulated MailCity cells with City data."
                },
                "streetabr": {
                    "column_name": "street address",
                    "column_description": "The abbreviated street address of the school, district, or administrative authority\u2019s physical location.",
                    "value_description": "The abbreviated street address of the school, district, or administrative authority\u2019s physical location. Note: Some records (primarily records of closed or retired schools) may not have data in this field."
                },
                "soctype": {
                    "column_name": "School Ownership Code Type",
                    "column_description": "The School Ownership Code Type is the text description of the type of school.",
                    "value_description": "The School Ownership Code Type is the text description of the type of school."
                },
                "phone": {
                    "column_name": "",
                    "column_description": "Phone",
                    "value_description": ""
                }
            },
            "satscores": {
                "cname": {
                    "column_name": "county name",
                    "column_description": "county name",
                    "value_description": ""
                },
                "sname": {
                    "column_name": "school name",
                    "column_description": "school name",
                    "value_description": ""
                }
            },
            "frpm": {
                "high grade": {
                    "column_name": "",
                    "column_description": "High Grade",
                    "value_description": ""
                },
                "low grade": {
                    "column_name": "",
                    "column_description": "Low Grade",
                    "value_description": ""
                },
                "school type": {
                    "column_name": "",
                    "column_description": "School Type",
                    "value_description": ""
                },
                "district type": {
                    "column_name": "",
                    "column_description": "District Type",
                    "value_description": ""
                },
                "educational option type": {
                    "column_name": "",
                    "column_description": "Educational Option Type",
                    "value_description": ""
                },
                "school name": {
                    "column_name": "",
                    "column_description": "School Name",
                    "value_description": ""
                }
            }
        },
        "status": "success"
    },
    {
        "node_type": "column_filtering",
        "tentative_schema": {
            "frpm": [
                "School Name",
                "District Type",
                "School Type",
                "Educational Option Type",
                "Low Grade",
                "Enrollment (K-12)",
                "CDSCode"
            ],
            "satscores": [
                "sname",
                "cds"
            ],
            "schools": [
                "District",
                "City",
                "MailCity",
                "DOCType",
                "SOCType",
                "EdOpsCode",
                "EdOpsName",
                "EILCode",
                "EILName",
                "GSoffered",
                "GSserved",
                "CDSCode"
            ]
        },
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "success",
        "missing_columns": [],
        "correct_columns": {
            "schools": [
                "gsserved",
                "city"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "table_selection",
        "tentative_schema": {
            "schools": [
                "District",
                "City",
                "MailCity",
                "DOCType",
                "SOCType",
                "EdOpsCode",
                "EdOpsName",
                "EILCode",
                "EILName",
                "GSoffered",
                "GSserved",
                "CDSCode"
            ],
            "frpm": [
                "School Name",
                "District Type",
                "School Type",
                "Educational Option Type",
                "Low Grade",
                "Enrollment (K-12)",
                "CDSCode"
            ]
        },
        "chain_of_thought_reasoning": "The question asks about the most common type of grade span served in the city of Adelanto. The hint suggests focusing on the city of Adelanto. The table 'schools' contains information about schools, including their city. The table 'frpm' contains information about schools, including their CDSCode, which is a foreign key referencing the 'schools' table. The table 'satscores' contains information about schools, but it's not directly related to the question. The 'GSserved' column in the 'schools' table contains the grade span served by each school, which is the key information needed to answer the question. Therefore, the necessary tables are 'schools' and possibly 'frpm' to filter schools by city.",
        "selected_tables": [
            "schools",
            "frpm"
        ],
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "success",
        "missing_columns": [],
        "correct_columns": {
            "schools": [
                "gsserved",
                "city"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "column_selection",
        "tentative_schema": {
            "schools": [
                "City",
                "GSserved"
            ],
            "frpm": [
                "CDSCode"
            ]
        },
        "model_selected_columns": {
            "schools": [
                "City",
                "GSserved"
            ],
            "frpm": [
                "CDSCode"
            ]
        },
        "chain_of_thought_reasoning": "To answer the question, we need to identify the most common type of grade span served in the city of Adelanto. We can achieve this by joining the schools table with the frpm table, filtering by City = 'Adelanto', and then grouping by GSserved to find the most common type of grade span served.",
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "success",
        "missing_columns": [],
        "correct_columns": {
            "schools": [
                "gsserved",
                "city"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "candidate_generation",
        "SQL": "SELECT GSserved FROM schools WHERE City = 'Adelanto' GROUP BY GSserved ORDER BY COUNT(CDSCode) DESC LIMIT 1 ",
        "status": "success"
    },
    {
        "node_type": "revision",
        "chain_of_thought_reasoning": "I started by identifying the column that contains the information about the grade span served, which is GSserved in the schools table. Then, I filtered the results to only include rows where the City is Adelanto. Next, I grouped the results by GSserved to get the unique grade spans served in Adelanto. Finally, I sorted the results by the count of CDSCode in descending order and limited the result to the top 1 to get the most common type of grade span served.",
        "SQL": "SELECT GSserved FROM schools WHERE City = 'Adelanto' GROUP BY GSserved ORDER BY COUNT(CDSCode) DESC LIMIT 1",
        "status": "success"
    },
    {
        "node_type": "evaluation",
        "candidate_generation": {
            "exec_res": 1,
            "exec_err": "--",
            "Question": "What is the most common type of grade span served in the city of Adelanto?",
            "Evidence": "",
            "GOLD_SQL": "SELECT GSserved FROM schools WHERE City = 'Adelanto' GROUP BY GSserved ORDER BY COUNT(GSserved) DESC LIMIT 1",
            "PREDICTED_SQL": "SELECT GSserved FROM schools WHERE City = 'Adelanto' GROUP BY GSserved ORDER BY COUNT(CDSCode) DESC LIMIT 1 "
        },
        "revision": {
            "exec_res": 1,
            "exec_err": "--",
            "Question": "What is the most common type of grade span served in the city of Adelanto?",
            "Evidence": "",
            "GOLD_SQL": "SELECT GSserved FROM schools WHERE City = 'Adelanto' GROUP BY GSserved ORDER BY COUNT(GSserved) DESC LIMIT 1",
            "PREDICTED_SQL": "SELECT GSserved FROM schools WHERE City = 'Adelanto' GROUP BY GSserved ORDER BY COUNT(CDSCode) DESC LIMIT 1"
        },
        "status": "success"
    }
]