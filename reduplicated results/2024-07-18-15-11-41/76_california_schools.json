[
    {
        "node_type": "keyword_extraction",
        "keywords": [
            "city",
            "location",
            "high school",
            "Lunch Provision 2",
            "9",
            "12",
            "county",
            "Merced",
            "EILCode",
            "HS"
        ],
        "status": "success"
    },
    {
        "node_type": "entity_retrieval",
        "similar_columns": {
            "schools": [
                "City",
                "School",
                "County",
                "EILCode"
            ]
        },
        "similar_values": {
            "schools": {
                "City": [
                    "Merced"
                ],
                "MailCity": [
                    "Merced"
                ],
                "School": [
                    "La Merced"
                ],
                "AdmLName1": [
                    "Schooler"
                ],
                "EILName": [
                    "High School"
                ],
                "StreetAbr": [
                    "High School Class"
                ],
                "Street": [
                    "1 High School Hill"
                ],
                "MailStrAbr": [
                    "1 High School Hill"
                ],
                "GSoffered": [
                    "6"
                ],
                "District": [
                    "Tri-County ROP"
                ],
                "County": [
                    "Merced"
                ]
            },
            "frpm": {
                "NSLP Provision Status": [
                    "Lunch Provision 2",
                    "Provision 2"
                ],
                "County Code": [
                    "21"
                ],
                "County Name": [
                    "Merced"
                ],
                "School Name": [
                    "Merced High"
                ]
            },
            "satscores": {
                "cname": [
                    "Merced"
                ]
            }
        },
        "status": "success"
    },
    {
        "node_type": "context_retrieval",
        "schema_with_descriptions": {
            "schools": {
                "soc": {
                    "column_name": "School Ownership Code",
                    "column_description": "The School Ownership Code is a numeric code used to identify the type of school.",
                    "value_description": "\u2022      08 - Preschool       \u2022       09 \u2013 Special Education Schools (Public) \u2022      11 \u2013 Youth Authority Facilities (CEA) \u2022       13 \u2013 Opportunity Schools \u2022       14 \u2013 Juvenile Court Schools \u2022       15 \u2013 Other County or District Programs \u2022       31 \u2013 State Special Schools \u2022       60 \u2013 Elementary School (Public) \u2022       61 \u2013 Elementary School in 1 School District (Public) \u2022       62 \u2013 Intermediate/Middle Schools (Public) \u2022       63 \u2013 Alternative Schools of Choice \u2022       64 \u2013 Junior High Schools (Public) \u2022       65 \u2013 K-12 Schools (Public) \u2022       66 \u2013 High Schools (Public) \u2022       67 \u2013 High Schools in 1 School District (Public) \u2022       68 \u2013 Continuation High Schools \u2022       69 \u2013 District Community Day Schools \u2022       70 \u2013 Adult Education Centers \u2022       98 \u2013 Regional Occupational Center/Program (ROC/P)"
                },
                "edopscode": {
                    "column_name": "Education Option Code",
                    "column_description": "The Education Option Code is a short text description of the type of education offered.",
                    "value_description": "\u2022      ALTSOC \u2013 Alternative School of Choice \u2022      COMM \u2013 County Community School \u2022       COMMDAY \u2013 Community Day School \u2022       CON \u2013 Continuation School \u2022       JUV \u2013 Juvenile Court School \u2022       OPP \u2013 Opportunity School \u2022       YTH \u2013 Youth Authority School \u2022       SSS \u2013 State Special School \u2022       SPEC \u2013 Special Education School \u2022       TRAD \u2013 Traditional \u2022       ROP \u2013 Regional Occupational Program \u2022       HOMHOS \u2013 Home and Hospital \u2022       SPECON \u2013 District Consortia Special Education School"
                },
                "website": {
                    "column_name": "",
                    "column_description": "The website address of the school, district, or administrative authority.",
                    "value_description": "The website address of the school, district, or administrative authority."
                },
                "eilcode": {
                    "column_name": "Educational Instruction Level Code",
                    "column_description": "The Educational Instruction Level Code is a short text description of the institution's type relative to the grade range served.",
                    "value_description": "\u2022       A \u2013 Adult \u2022       ELEM \u2013 Elementary \u2022       ELEMHIGH \u2013 Elementary-High Combination \u2022       HS \u2013 High School \u2022       INTMIDJR \u2013 Intermediate/Middle/Junior High \u2022       PS \u2013 Preschool \u2022       UG \u2013 Ungraded"
                },
                "soctype": {
                    "column_name": "School Ownership Code Type",
                    "column_description": "The School Ownership Code Type is the text description of the type of school.",
                    "value_description": "The School Ownership Code Type is the text description of the type of school."
                },
                "streetabr": {
                    "column_name": "street address",
                    "column_description": "The abbreviated street address of the school, district, or administrative authority\u2019s physical location.",
                    "value_description": "The abbreviated street address of the school, district, or administrative authority\u2019s physical location. Note: Some records (primarily records of closed or retired schools) may not have data in this field."
                },
                "district": {
                    "column_name": "",
                    "column_description": "District",
                    "value_description": ""
                },
                "doc": {
                    "column_name": "District Ownership Code",
                    "column_description": "District Ownership Code",
                    "value_description": "The District Ownership Code (DOC) is the numeric code used to identify the category of the Administrative Authority. \u2022       00 - County Office of Education \u2022       02 \u2013 State Board of Education \u2022       03 \u2013 Statewide Benefit Charter \u2022       31 \u2013 State Special Schools \u2022       34 \u2013 Non-school Location* \u2022       52 \u2013 Elementary School District \u2022       54 \u2013 Unified School District \u2022       56 \u2013 High School District \u2022       98 \u2013 Regional Occupational Center/Program (ROC/P)  *Only the California Education Authority has been included in the non-school location category."
                }
            },
            "satscores": {
                "sname": {
                    "column_name": "school name",
                    "column_description": "school name",
                    "value_description": ""
                },
                "enroll12": {
                    "column_name": "enrollment (1st-12nd grade)",
                    "column_description": "enrollment (1st-12nd grade)",
                    "value_description": ""
                },
                "cname": {
                    "column_name": "county name",
                    "column_description": "county name",
                    "value_description": ""
                }
            },
            "frpm": {
                "school code": {
                    "column_name": "",
                    "column_description": "School Code",
                    "value_description": ""
                }
            }
        },
        "status": "success"
    },
    {
        "node_type": "column_filtering",
        "tentative_schema": {
            "frpm": [
                "CDSCode",
                "County Code",
                "School Code",
                "School Name",
                "District Type",
                "School Type",
                "NSLP Provision Status",
                "Low Grade"
            ],
            "satscores": [
                "sname",
                "cname",
                "enroll12",
                "cds"
            ],
            "schools": [
                "CDSCode",
                "County",
                "School",
                "Street",
                "StreetAbr",
                "City",
                "MailCity",
                "DOCType",
                "SOC",
                "EILCode",
                "EILName",
                "GSoffered",
                "GSserved",
                "AdmLName3"
            ]
        },
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "missing_column",
        "missing_columns": [
            "'frpm'.'High Grade'"
        ],
        "correct_columns": {
            "schools": [
                "city",
                "cdscode",
                "eilcode",
                "county"
            ],
            "frpm": [
                "cdscode",
                "High Grade",
                "Low Grade",
                "NSLP Provision Status"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "table_selection",
        "tentative_schema": {
            "frpm": [
                "CDSCode",
                "County Code",
                "School Code",
                "School Name",
                "District Type",
                "School Type",
                "NSLP Provision Status",
                "Low Grade"
            ],
            "schools": [
                "CDSCode",
                "County",
                "School",
                "Street",
                "StreetAbr",
                "City",
                "MailCity",
                "DOCType",
                "SOC",
                "EILCode",
                "EILName",
                "GSoffered",
                "GSserved",
                "AdmLName3"
            ]
        },
        "chain_of_thought_reasoning": "The question asks for the city location of a high school level school with Lunch Provision 2, lowest grade 9, and highest grade 12 in the county of Merced. The hint helps to identify the high school level school as EILCode = 'HS'. This information is crucial in selecting the relevant tables. The 'frpm' table provides information about the school type, including the NSLP Provision Status, which is 'Lunch Provision 2'. The 'schools' table contains information about the school's location, including the city. The 'satscores' table is not necessary for this question, as it provides information about enrollment and scores, which is not relevant to the question. Therefore, the necessary tables are 'frpm' and 'schools'.",
        "selected_tables": [
            "frpm",
            "schools"
        ],
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "missing_column",
        "missing_columns": [
            "'frpm'.'High Grade'"
        ],
        "correct_columns": {
            "schools": [
                "city",
                "cdscode",
                "eilcode",
                "county"
            ],
            "frpm": [
                "cdscode",
                "High Grade",
                "Low Grade",
                "NSLP Provision Status"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "column_selection",
        "tentative_schema": {
            "frpm": [
                "CDSCode",
                "County Code",
                "Low Grade",
                "NSLP Provision Status"
            ],
            "schools": [
                "CDSCode",
                "County",
                "EILCode",
                "City"
            ]
        },
        "model_selected_columns": {
            "frpm": [
                "CDSCode",
                "County Code",
                "Low Grade",
                "NSLP Provision Status"
            ],
            "schools": [
                "CDSCode",
                "County",
                "EILCode",
                "City"
            ]
        },
        "chain_of_thought_reasoning": "The question asks for the city location of a high school level school with Lunch Provision 2, lowest grade 9, and highest grade 12 in the county of Merced. The hint suggests that EILCode = 'HS' represents high school. We need to find the school with this EILCode, in Merced county, with lowest grade 9 and highest grade 12, and Lunch Provision 2. We also need the city location of this school.",
        "missing_table_status": "success",
        "missing_tables": [],
        "missing_column_status": "missing_column",
        "missing_columns": [
            "'frpm'.'High Grade'"
        ],
        "correct_columns": {
            "schools": [
                "city",
                "cdscode",
                "eilcode",
                "county"
            ],
            "frpm": [
                "cdscode",
                "High Grade",
                "Low Grade",
                "NSLP Provision Status"
            ]
        },
        "status": "success"
    },
    {
        "node_type": "candidate_generation",
        "SQL": "SELECT T2.City FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T2.County = 'Merced' AND T2.EILCode = 'HS' AND T1.`Low Grade` = 9 AND T1.`NSLP Provision Status` = 'Lunch Provision 2' ",
        "status": "success"
    },
    {
        "node_type": "revision",
        "chain_of_thought_reasoning": "I started by identifying the relevant columns and tables based on the question. I noticed that the question asks for the city location of the high school level school with Lunch Provision 2 whose lowest grade is 9 and the highest grade is 12 in the county of Merced. I used the hint that high school can be represented as EILCode = 'HS'. I then joined the frpm and schools tables on the CDSCode column to get the city location of the school. I filtered the results to only include schools with Lunch Provision 2, lowest grade 9, and highest grade 12, and county of Merced. Finally, I selected the City column from the schools table.",
        "SQL": "SELECT T2.City FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T2.County = 'Merced' AND T2.EILCode = 'HS' AND T1.`Low Grade` = 9 AND T1.`High Grade` = 12 AND T1.`NSLP Provision Status` = 'Lunch Provision 2'",
        "status": "success"
    },
    {
        "node_type": "evaluation",
        "candidate_generation": {
            "exec_res": 1,
            "exec_err": "--",
            "Question": "What is the city location of the high school level school with Lunch Provision 2 whose lowest grade is 9 and the highest grade is 12 in the county of Merced?",
            "Evidence": "High school can be represented as EILCode = 'HS'",
            "GOLD_SQL": "SELECT T2.City FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T1.`NSLP Provision Status` = 'Lunch Provision 2' AND T2.County = 'Merced' AND T1.`Low Grade` = 9 AND T1.`High Grade` = 12 AND T2.EILCode = 'HS'",
            "PREDICTED_SQL": "SELECT T2.City FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T2.County = 'Merced' AND T2.EILCode = 'HS' AND T1.`Low Grade` = 9 AND T1.`NSLP Provision Status` = 'Lunch Provision 2' "
        },
        "revision": {
            "exec_res": 1,
            "exec_err": "--",
            "Question": "What is the city location of the high school level school with Lunch Provision 2 whose lowest grade is 9 and the highest grade is 12 in the county of Merced?",
            "Evidence": "High school can be represented as EILCode = 'HS'",
            "GOLD_SQL": "SELECT T2.City FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T1.`NSLP Provision Status` = 'Lunch Provision 2' AND T2.County = 'Merced' AND T1.`Low Grade` = 9 AND T1.`High Grade` = 12 AND T2.EILCode = 'HS'",
            "PREDICTED_SQL": "SELECT T2.City FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode WHERE T2.County = 'Merced' AND T2.EILCode = 'HS' AND T1.`Low Grade` = 9 AND T1.`High Grade` = 12 AND T1.`NSLP Provision Status` = 'Lunch Provision 2'"
        },
        "status": "success"
    }
]